<popup></popup>

<%

function popitup(url)
{ // http://www.quirksmode.org/js/popup.html
  return window.open(url, phoxy._.internal.GenerateUniqueID(),'height=500,width=800');

  return false;
}

function second_try()
{
  res = confirm("Please allow pop-up this is required for continue");

  if (res)
    return popitup(__this.url)
}

function wait_for_focus_and_begin()
{
  if (!window.focus)
    return phoxy.Defer(arguments.callee, 100);

  newwindow = popitup(__this.url);
  if (newwindow == undefined)
  second_try();
  if (newwindow == undefined)
  return alert("Unable to create popup, sorry");

  newwindow.focus();
}

wait_for_focus_and_begin();

%>
