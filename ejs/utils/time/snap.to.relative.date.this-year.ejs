<%
var event = new window.Date(__this.snap * 1000);
var now = new window.Date(Date.now());

var difference = now - event;

if (difference < 0)
  return __this.__append("Your time settings incorrect!");

var diff = new Date(difference + now.getTimezoneOffset() * 60 * 1000);

var diff_days = diff.getDate() - 1;

if (diff.getMonth() || diff_days > 6)
{
  var obj =
  {
    snap: __this.snap,
    format:
    {
      month: 'short',
      day: 'numeric',
    }
  };
  return __this.CascadeDesign('utils/time/echo.by.format', obj);
}

if (!diff_days)
{
  if (!__this.silent_today)
    __this.__append("Today");
  return;
}

if (diff_days > 1)
  __this.CascadeDesign('utils/time/snap.to.weekday', __this);
else
  __this.__append("Yesterday");
%>
