<%
var event = new window.Date(__this.snap * 1000);
var now = new window.Date(Date.now());

var difference = now - event;

if (difference < 0)
  return __this.__append("Your time settings incorrect!");

var diff = new Date(difference + now.getTimezoneOffset() * 60 * 1000);
var diff_days = diff.getDate() - 1;

__this.silent_today = true;

__this.CascadeDesign('utils/time/snap.to.relative.date', __this);

if (diff.getFullYear() == 1970 && diff.getMonth() == 0 && diff_days < 6)
  __this.CascadeDesign('utils/time/snap.to.relative.time', __this);
%>
