<%
var snap = __this.snap || __this.data;
var event = new window.Date(snap * 1000);
var now = new window.Date(Date.now());

var difference = now - event;

if (difference < 0)
  return __this.__append("Your time settings incorrect!");

var diff = new Date(difference + now.getTimezoneOffset() * 60 * 1000);

if (diff.getFullYear() == 1970)
  return __this.CascadeDesign('utils/time/snap.to.relative.date.this-year', __this);

return __this.CascadeDesign('utils/time/snap.to.date', __this);
%>
